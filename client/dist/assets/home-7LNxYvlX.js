import{r as f,j as r,L as D,a as L}from"./index-O4iqtcr5.js";import{G as F,D as A,H as I}from"./header-A29Rku9o.js";import{b as w,a as b}from"./axios-TBUHlTnk.js";import{U as S}from"./UserApi-sY5N0P4G.js";const k={createPost:async e=>{try{const n=localStorage.getItem("authToken"),t=await fetch(`${w}/createpost`,{method:"POST",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const a=await t.text();throw console.error("Error creating post:",a),new Error(`Error creating post: ${a||t.statusText}`)}return await t.json()}catch(n){throw console.error("Error creating post:",n),new Error("Error creating post")}},getPost:async()=>{try{const e=localStorage.getItem("authToken");return(await b.get(`${w}/allpost`,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}})).data.posts}catch(e){throw console.error("Error fetching posts:",e),new Error("Error fetching posts")}},addComment:async(e,n,t)=>{try{const o=localStorage.getItem("authToken"),a=await b.put(w+"/comment",{text:n,postId:e,postedBy:t},{headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"}});if(a.status===200)return a.data;throw console.error("Failed to add comment"),new Error("Failed to add comment")}catch(o){throw console.error("Error adding comment:",o),console.error("Axios Error Details:",o.response),new Error("Error adding comment")}},toggleLikes:async(e,n)=>{try{const t=localStorage.getItem("authToken"),o=await b.put(w+"/toggleLike",{docId:e,likerId:n},{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(o.status===200)return o.data;throw console.error("Failed to like post"),new Error("Failed to like post")}catch(t){throw console.error("Error liking post:",t),new Error("Error liking post")}},handleDelete:async e=>{try{const n=localStorage.getItem("authToken"),t=await b.delete(`${w}/deletepost/${e}`,{headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"}});if(t.status===200)return t.data;throw console.error("Failed to delete like"),new Error("Failed to delete like")}catch(n){throw console.error("Error deleting like:",n),new Error("Error deleting like")}},handleFollowUnFollow:async(e,n,t)=>{try{const o=localStorage.getItem("authToken");let a;if(!t.length>0?a=await b.put(`${w}/follow`,{user_id:e,postedUserId:n},{headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"}}):a=await b.put(`${w}/unfollow`,{user_id:e,postedUserId:n},{headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"}}),a.status===200)return a.data;throw console.error("Failed to Follow/Unfollow user"),new Error("Failed to Follow/Unfollow user")}catch(o){throw console.error("Error following/unfollowing user:",o),new Error("Error following/unfollowing user")}}};function _(e){return F({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"circle",attr:{cx:"256",cy:"256",r:"48"},child:[]},{tag:"circle",attr:{cx:"416",cy:"256",r:"48"},child:[]},{tag:"circle",attr:{cx:"96",cy:"256",r:"48"},child:[]}]})(e)}function z(e){return F({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"m112 112 20 320c.95 18.49 14.4 32 32 32h184c17.67 0 30.87-13.51 32-32l20-320"},child:[]},{tag:"path",attr:{strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"32",d:"M80 112h352"},child:[]},{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M192 112V72h0a23.93 23.93 0 0 1 24-24h80a23.93 23.93 0 0 1 24 24h0v40m-64 64v224m-72-224 8 224m136-224-8 224"},child:[]}]})(e)}function $({username:e,docId:n,setPosts:t,user:o,postedUserId:a,i:c}){var y;const[l,s]=f.useState(!1),[u,i]=f.useState([]),d=async h=>{try{t(T=>T.filter(W=>W._id!==h)),(await k.handleDelete(h)).status===200&&alert("Successfully deleted post")}catch(p){console.error("Error deleting post:",p)}},x=async h=>{try{(await S.handleFollowUnFollow(h,a,m)).status===200&&alert("You have Followed")}catch(p){console.error("Error Following User ",p)}};f.useEffect(()=>{(async()=>{try{const p=await S.GetSelectiveUserData(a);i(p)}catch(p){console.error("Error Fetching User Data ",p)}})()},[a,u]);const m=(y=u==null?void 0:u.user)==null?void 0:y.Followers.filter(h=>h===o._id);return r.jsxs("div",{className:"flex border-b justify-between border-gray-900  h-4 p-4  py-10",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsxs(D,{to:`/p/${e}`,className:"flex items-center",children:[r.jsx("img",{className:"rounded-full border border-gray-900 w-12  flex mr-3",src:`/images/avatars/${c+1}.jpg`,alt:`${e} profile picture`}),r.jsx("p",{className:"font-bold  text-white tracking-wide ",children:e.slice(0,10)})]}),r.jsxs("button",{onClick:()=>x(o._id),className:"ml-3 text-[0.8rem] border px-6 tracking-wide py-1 bg-white bg-opacity-5 hover:bg-opacity-10 text-white",children:[(m==null?void 0:m.length)>0?"Following":"Follow"," "]})]}),r.jsxs("div",{className:"text-white  relative flex items-center",children:[r.jsx("button",{className:"text-lg",onClick:()=>s(h=>s(!h)),style:{outline:"none"},children:r.jsx(_,{})}),l&&r.jsxs("button",{onClick:()=>d(n),className:"flex items-center text-black absolute  border-gray-400 bg-white bg-opacity-90 right-0 top-2 font-semibold px-6 py-2 rounded shadow-md hover:text-zinc-700",children:[r.jsx(z,{className:"mr-2"}),"Delete"]})," "]})]})}function O({src:e,caption:n}){return r.jsx("img",{src:"https://th.bing.com/th/id/R.b5b45a56f38e33ad91d74f1ebaca840a?rik=97hxPU1T4GKZxA&pid=ImgRaw&r=0",alt:n})}function U({likedBy:e,docId:n,totalLikes:t,handleFocus:o}){const[a,c]=f.useState(t),[l,s]=f.useState(!1),u=async()=>{try{const i=await k.toggleLikes(n,e);s(i.Likes.map(d=>d===e)),c(i.Likes?i.Likes.length:0)}catch(i){console.error("Error toggling like:",i)}};return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"flex justify-between pt-4 pb-2 px-4",children:r.jsxs("div",{className:"flex",children:[r.jsx("svg",{onClick:u,onKeyDown:i=>{i.key==="Enter"&&u()},xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",tabIndex:0,className:`w-8  mr-4 select-none cursor-pointer focus:outline-none ${l.length>0?" text-white  fill-red-700":"text-white"}`,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),r.jsx("svg",{onClick:o,onKeyDown:i=>{i.key==="Enter"&&o()},className:"w-8 text-white select-none cursor-pointer focus:outline-none",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",tabIndex:0,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})]})}),r.jsx("div",{className:"px-5  mb-1  py-0",children:r.jsx("p",{className:"font-bold text-white",children:a===1?`${a} like`:`${a} likes`})})]})}function B({caption:e,username:n}){return r.jsxs("div",{className:"p-4 px-5  pt-1 pb-1",children:[r.jsx("span",{className:"mr-3 text-lg text-gray-200 font-semibold ",children:n}),r.jsx("span",{className:"italic   text-gray-300",children:e})]})}function g(e){const n=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&n==="[object Date]"?new e.constructor(+e):typeof e=="number"||n==="[object Number]"||typeof e=="string"||n==="[object String]"?new Date(e):new Date(NaN)}const M=43200,C=1440;let X={};function R(){return X}function E(e){const n=g(e),t=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return t.setUTCFullYear(n.getFullYear()),+e-+t}function N(e,n){const t=g(e),o=g(n),a=t.getTime()-o.getTime();return a<0?-1:a>0?1:a}function Y(e,n){const t=g(e),o=g(n),a=t.getFullYear()-o.getFullYear(),c=t.getMonth()-o.getMonth();return a*12+c}function H(e){return n=>{const o=(e?Math[e]:Math.trunc)(n);return o===0?0:o}}function V(e,n){return+g(e)-+g(n)}function J(e){const n=g(e);return n.setHours(23,59,59,999),n}function q(e){const n=g(e),t=n.getMonth();return n.setFullYear(n.getFullYear(),t+1,0),n.setHours(23,59,59,999),n}function K(e){const n=g(e);return+J(n)==+q(n)}function Q(e,n){const t=g(e),o=g(n),a=N(t,o),c=Math.abs(Y(t,o));let l;if(c<1)l=0;else{t.getMonth()===1&&t.getDate()>27&&t.setDate(30),t.setMonth(t.getMonth()-a*c);let s=N(t,o)===-a;K(g(e))&&c===1&&N(e,o)===1&&(s=!1),l=a*(c-Number(s))}return l===0?0:l}function G(e,n,t){const o=V(e,n)/1e3;return H(t==null?void 0:t.roundingMethod)(o)}const Z={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},ee=(e,n,t)=>{let o;const a=Z[e];return typeof a=="string"?o=a:n===1?o=a.one:o=a.other.replace("{{count}}",n.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+o:o+" ago":o};function P(e){return(n={})=>{const t=n.width?String(n.width):e.defaultWidth;return e.formats[t]||e.formats[e.defaultWidth]}}const te={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},ne={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},re={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},ae={date:P({formats:te,defaultWidth:"full"}),time:P({formats:ne,defaultWidth:"full"}),dateTime:P({formats:re,defaultWidth:"full"})},oe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},se=(e,n,t,o)=>oe[e];function j(e){return(n,t)=>{const o=t!=null&&t.context?String(t.context):"standalone";let a;if(o==="formatting"&&e.formattingValues){const l=e.defaultFormattingWidth||e.defaultWidth,s=t!=null&&t.width?String(t.width):l;a=e.formattingValues[s]||e.formattingValues[l]}else{const l=e.defaultWidth,s=t!=null&&t.width?String(t.width):e.defaultWidth;a=e.values[s]||e.values[l]}const c=e.argumentCallback?e.argumentCallback(n):n;return a[c]}}const ie={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},le={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},ce={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},de={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},ue={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},me={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},he=(e,n)=>{const t=Number(e),o=t%100;if(o>20||o<10)switch(o%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},fe={ordinalNumber:he,era:j({values:ie,defaultWidth:"wide"}),quarter:j({values:le,defaultWidth:"wide",argumentCallback:e=>e-1}),month:j({values:ce,defaultWidth:"wide"}),day:j({values:de,defaultWidth:"wide"}),dayPeriod:j({values:ue,defaultWidth:"wide",formattingValues:me,defaultFormattingWidth:"wide"})};function v(e){return(n,t={})=>{const o=t.width,a=o&&e.matchPatterns[o]||e.matchPatterns[e.defaultMatchWidth],c=n.match(a);if(!c)return null;const l=c[0],s=o&&e.parsePatterns[o]||e.parsePatterns[e.defaultParseWidth],u=Array.isArray(s)?pe(s,x=>x.test(l)):ge(s,x=>x.test(l));let i;i=e.valueCallback?e.valueCallback(u):u,i=t.valueCallback?t.valueCallback(i):i;const d=n.slice(l.length);return{value:i,rest:d}}}function ge(e,n){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)&&n(e[t]))return t}function pe(e,n){for(let t=0;t<e.length;t++)if(n(e[t]))return t}function xe(e){return(n,t={})=>{const o=n.match(e.matchPattern);if(!o)return null;const a=o[0],c=n.match(e.parsePattern);if(!c)return null;let l=e.valueCallback?e.valueCallback(c[0]):c[0];l=t.valueCallback?t.valueCallback(l):l;const s=n.slice(a.length);return{value:l,rest:s}}}const ye=/^(\d+)(th|st|nd|rd)?/i,we=/\d+/i,be={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},je={any:[/^b/i,/^(a|c)/i]},ve={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},ke={any:[/1/i,/2/i,/3/i,/4/i]},Me={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Ne={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},De={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Pe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Se={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Ce={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Ee={ordinalNumber:xe({matchPattern:ye,parsePattern:we,valueCallback:e=>parseInt(e,10)}),era:v({matchPatterns:be,defaultMatchWidth:"wide",parsePatterns:je,defaultParseWidth:"any"}),quarter:v({matchPatterns:ve,defaultMatchWidth:"wide",parsePatterns:ke,defaultParseWidth:"any",valueCallback:e=>e+1}),month:v({matchPatterns:Me,defaultMatchWidth:"wide",parsePatterns:Ne,defaultParseWidth:"any"}),day:v({matchPatterns:De,defaultMatchWidth:"wide",parsePatterns:Pe,defaultParseWidth:"any"}),dayPeriod:v({matchPatterns:Se,defaultMatchWidth:"any",parsePatterns:Ce,defaultParseWidth:"any"})},Fe={code:"en-US",formatDistance:ee,formatLong:ae,formatRelative:se,localize:fe,match:Ee,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Te(e,n,t){const o=R(),a=(t==null?void 0:t.locale)??o.locale??Fe,c=2520,l=N(e,n);if(isNaN(l))throw new RangeError("Invalid time value");const s=Object.assign({},t,{addSuffix:t==null?void 0:t.addSuffix,comparison:l});let u,i;l>0?(u=g(n),i=g(e)):(u=g(e),i=g(n));const d=G(i,u),x=(E(i)-E(u))/1e3,m=Math.round((d-x)/60);let y;if(m<2)return t!=null&&t.includeSeconds?d<5?a.formatDistance("lessThanXSeconds",5,s):d<10?a.formatDistance("lessThanXSeconds",10,s):d<20?a.formatDistance("lessThanXSeconds",20,s):d<40?a.formatDistance("halfAMinute",0,s):d<60?a.formatDistance("lessThanXMinutes",1,s):a.formatDistance("xMinutes",1,s):m===0?a.formatDistance("lessThanXMinutes",1,s):a.formatDistance("xMinutes",m,s);if(m<45)return a.formatDistance("xMinutes",m,s);if(m<90)return a.formatDistance("aboutXHours",1,s);if(m<C){const h=Math.round(m/60);return a.formatDistance("aboutXHours",h,s)}else{if(m<c)return a.formatDistance("xDays",1,s);if(m<M){const h=Math.round(m/C);return a.formatDistance("xDays",h,s)}else if(m<M*2)return y=Math.round(m/M),a.formatDistance("aboutXMonths",y,s)}if(y=Q(i,u),y<12){const h=Math.round(m/M);return a.formatDistance("xMonths",h,s)}else{const h=y%12,p=Math.trunc(y/12);return h<3?a.formatDistance("aboutXYears",p,s):h<9?a.formatDistance("overXYears",p,s):a.formatDistance("almostXYears",p+1,s)}}function We({docId:e,comments:n,setComments:t,commentInput:o,postedBy:a}){const[c,l]=f.useState(""),s=async i=>{if(i.preventDefault(),!(c.length<1))try{const d=await k.addComment(e,c,a);t([...n,d.Comments[d.Comments.length-1]]),l("")}catch(d){console.error("Error adding comment:",d)}},u=i=>{i.key==="Enter"&&!i.shiftKey&&c.length>=1&&(i.preventDefault(),s(i))};return r.jsx("div",{className:" pb-4 px-2  ",children:r.jsx("form",{className:"flex items-center border-gray-primary",method:"POST",onSubmit:s,children:r.jsx("input",{"aria-label":"Add a comment",autoComplete:"off",className:"w-full py-3.5 px-4 mx-2 text-sm rounded-xl bg-zinc-800   text-gray-300 focus:outline-none",type:"text",name:"add-comment",placeholder:"Enter your comment...",value:c,onChange:({target:i})=>l(i.value),onKeyDown:u,ref:o})})})}function Le({docId:e,comments:n,postedBy:t,timestamp:o,commentInput:a}){const[c,l]=f.useState(n),[s,u]=f.useState(2),i=()=>{u(s+3)};return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"p-4 ml-1 pt-0 pb-2",children:[c.slice(0,s).map(d=>r.jsxs("p",{className:"mb-1",children:[r.jsx(D,{to:`/p/${d.PostedBy.Name}`,children:r.jsx("span",{className:"mr-1 text-gray-300 font-semibold",children:d.PostedBy.Name})}),r.jsx("span",{className:"text-gray-300 ml-1.5",children:d.Text})]},d._id)),c.length>=3&&s<c.length&&r.jsx("button",{className:"text-sm text-gray-base mb-1  text-gray-300 cursor-pointer focus:outline-none",type:"button",onClick:i,onKeyDown:d=>{d.key==="Enter"&&i()},children:"View more comments"}),r.jsxs("p",{className:"text-gray-base uppercase text-gray-300 text-xs mt-2",children:[Te(o,new Date)," ago"]})]}),r.jsx(We,{docId:e,comments:c,postedBy:t,setComments:l,commentInput:a})]})}function Ae({content:e,user:n,setPosts:t,i:o}){const a=f.useRef(null),c=()=>a.current.focus();return r.jsxs("div",{className:"rounded-xl col-span-4 border bg-zinc-900 border-zinc-800 mb-12",children:[r.jsx($,{i:o,docId:e._id,setPosts:t,username:e.PostedBy.Name,postedUserId:e.PostedBy._id,user:n}),r.jsx(O,{src:e.Photo,caption:e.Title}),r.jsx(U,{docId:e._id,likedBy:n._id,totalLikes:e.Likes.length,handleFocus:c}),r.jsx(B,{caption:e.Title,username:e.PostedBy.Name}),r.jsx(Le,{docId:e._id,comments:e.Comments,timestamp:e.createdAt,postedBy:n._id,commentInput:a})]})}function Ie({user:e}){const[n,t]=f.useState([]);return f.useEffect(()=>{(async()=>{try{const a=await k.getPost();t(a)}catch(a){console.error("Error fetching posts:",a.message)}})()},[]),r.jsx("div",{className:"container col-span-2",children:n?n.map((o,a)=>r.jsx(Ae,{user:e,setPosts:t,content:o,i:a},o._id)):null})}function _e({userData:e}){return r.jsxs(D,{to:"/p/12",className:"grid grid-cols-4 gap-4 mb-6 items-center",children:[r.jsx("div",{className:"flex items-center justify-between col-span-1",children:r.jsx("img",{className:"rounded-full w-16 flex mr-3",src:"/images/avatars/steve.jpg",alt:"",onError:n=>{n.target.src=A}})}),r.jsxs("div",{className:"col-span-3 text-white",children:[r.jsx("p",{className:"font-bold text-sm",children:e.username}),r.jsxs("p",{className:"text-sm",children:[e.fullName," "]})]})]})}function ze({username:e,i:n}){return r.jsxs("div",{className:"flex text-white flex-row items-center align-items justify-between",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("img",{className:"rounded-full w-8 flex mr-3",src:`/images/avatars/${n}.jpg`,alt:"",onError:t=>{t.target.src="/images/avatars/default.png"}}),r.jsx(D,{to:`/p/${e}`,children:r.jsx("p",{className:"font-bold text-sm",children:e})})]}),r.jsx("button",{className:"text-xs font-bold text-blue-medium",type:"button",children:"Follow"})]})}function $e({userData:e,loggedInUserDocId:n}){return r.jsxs("div",{className:"rounded flex flex-col",children:[r.jsx("div",{className:"text-sm flex items-center align-items justify-between mb-2",children:r.jsx("p",{className:"font-bold  text-gray-100",children:"Suggestions for you"})}),r.jsx("div",{className:"mt-4 grid gap-5",children:e.users.map((t,o)=>r.jsx(ze,{profilexDocId:t._id,username:t.Username,profileId:t._id,loggedInUserDocId:n,i:o+1},t._id+t._id))})]})}function Oe({user:e}){const[n,t]=f.useState([]),[o,a]=f.useState(!0);return f.useEffect(()=>{(async()=>{try{const l=await S.getAllUsers();t(l),a(!1)}catch(l){console.error("Error Fetching User Data ",l),a(!1)}})()},[]),o?r.jsx(r.Fragment,{}):(console.log(n),r.jsxs("div",{className:"p-4 rounded-xl ml-4 bg-zinc-900 overflow-hidden h-80 justify-end min-h-content",children:[r.jsx(_e,{userData:e}),r.jsx($e,{loggedInUserDocId:e._id,userData:n})]}))}const Ue=({setIsOpen:e,user:n})=>{const[t,o]=f.useState({title:"",description:"",file:null});f.useState({});const a=l=>{const{name:s,value:u,files:i}=l.target;o(d=>({...d,[s]:i?i[0]:u}))},c=async l=>{if(l.preventDefault(),!t.title||!t.description||!t.file){alert("Please provide a title and description and a image file");return}try{const s=new FormData;s.append("title",t.title),s.append("description",t.description),s.append("fileName",t.file.name),s.append("fileType",t.file.type),s.append("id",n._id);const u={};s.forEach((d,x)=>{u[x]=d});const i=await k.createPost(u);console.log("Post created successfully:",i.data),e(!1),window.location.reload()}catch(s){console.error("Error creating post:",s.message)}};return r.jsxs("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2  -translate-y-1/2 w-[30rem] bg-gray-50 py-5 px-8 rounded-xl shadow-md",children:[r.jsxs("div",{className:"flex justify-between mb-4   ",children:[r.jsx("h2",{className:"text-2xl font-semibold  ",children:"Upload Post"}),r.jsx("button",{className:"text-gray-500 font-semibold text-lg mb-0.5 ",onClick:()=>e(!1),children:"X"})]}),r.jsxs("form",{onSubmit:c,children:[r.jsxs("div",{className:"bg-white pt-8 px-6 border-2 border-gray-100  shadow-md rounded-xl",children:[r.jsx("div",{className:"mb-4",children:r.jsx("input",{type:"text",id:"title",name:"title",placeholder:"Title of the post",className:"w-full border border-gray-300 p-4 rounded-md",onChange:a})}),r.jsx("div",{className:"mb-4",children:r.jsx("textarea",{id:"description",placeholder:"Description of the post",name:"description",className:"w-full border border-gray-300 p-4  rounded-md",onChange:a})}),r.jsx("div",{className:"mb-8 border-t pt-4",children:r.jsx("input",{type:"file",id:"file",name:"file",className:"w-full border border-gray-300  rounded-md p-3 ",onChange:a})})]}),r.jsxs("div",{className:"flex justify-end mt-5",children:[r.jsx("button",{onClick:()=>e(!1),className:"text-red px-4 py-2 rounded-md text-red-500 mr-4",children:"Cancel"}),r.jsx("button",{type:"submit",className:"bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600",children:"Submit"})]})]})]})},Be=Ue;function Je({}){f.useEffect(()=>{document.title="Instagram"},[]);const{user:e}=L(),[n,t]=f.useState(!1);return r.jsx(r.Fragment,{children:r.jsxs("div",{className:"bg-zinc-950  ",children:[r.jsx(I,{user:e,setIsOpen:t}),r.jsxs("div",{className:"grid grid-cols-3 gap-8 justify-between mx-auto max-w-screen-lg",children:[n&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"fixed top-0 left-0 w-full h-full bg-black opacity-50 z-50"}),r.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2  -translate-y-1/2 z-50    ",children:r.jsx(Be,{user:e,setIsOpen:t})})]}),r.jsx(Ie,{user:e}),r.jsx(Oe,{user:e})]})]})})}export{Je as default};
